<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="css/page.css">
    <link rel="stylesheet" href="css/std_dashb.css">
    <!-- <script src="js/session.js"></script> -->
</head>
<body> 
    <header>
        <nav>
          <div class="logo">
              <img src="images/pu_logo_line.png" alt="pu_logo" class="logo">    
          <a href="main.html" class="group"><img src="images/logo_uplift.png" alt="Uplift" class="group"></a>
        </div>
          <ul>
            <li><a href="std_dash.html" class="navs">Home</a></li>
            <li><a href="#" class="navs">Events</a></li>
            <li><a href="#" class="navs">Hackathon</a></li>
            <li><a href="#" class="navs">Internship</a></li>
            <li><a href="#" class="navs">Mentorship</a></li>
            <li><a href="#" class="navs">Jobs</a></li>
            <li><a href="about.html" class="navs">About</a></li>
            <li class="profile-container" style="margin-left: auto;">
              <a href="profile.html" class="navs profile-toggle"><img src="images/user.png" alt="profile" class="profile" title="Profile"></a>
            </li>
          </ul>
        </nav>
      </header>
    <section>
        <div class="container-fluid">
            <div class="container">
                    <div id="postsContainer" class="posts"></div>
            </div>
        </div>
    </section>

    <script>
    function fetchPosts() {
    fetch("http://localhost:8080/student/posts")
        .then(response => {
            if (response.ok) {
                return response.json();
            } else {
                throw new Error('Failed to fetch posts');
            }
        })
        .then(data => {
            const postsContainer = document.getElementById("postsContainer");
            postsContainer.innerHTML = "";

            data.forEach(post => {
                const postElement = document.createElement("div");
                postElement.className = "each-post";

                if (post.imageUrl) {
                    const postImage = document.createElement("div");
                    postImage.className = "post-img";
                    const postImageElement = document.createElement("img");
                    postImageElement.src = post.imageUrl;
                    postImage.appendChild(postImageElement);
                    postElement.appendChild(postImage);
                }

                const postContent = document.createElement("div");
                postContent.className = "post-content";

                const postTitle = document.createElement("div");
                postTitle.className = "title";
                postTitle.textContent = post.postTitle;
                postContent.appendChild(postTitle);

                const postDesc = document.createElement("div");
                postDesc.className = "description";
                postDesc.textContent = post.postDesc;
                postContent.appendChild(postDesc);

                const postLike = document.createElement("div");
                postLike.className = "like";
                postLike.textContent = "11 likes | 13 comments";
                postContent.appendChild(postLike);

                postElement.appendChild(postContent);
                postsContainer.appendChild(postElement);
            });
        })
        .catch(error => {
            console.error(error.message);
        });
}

// Fetch posts on page load
window.onload = fetchPosts;
    </script>
</body>
</html>